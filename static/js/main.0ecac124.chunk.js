(this["webpackJsonpreact-form-fp"]=this["webpackJsonpreact-form-fp"]||[]).push([[0],{10:function(e,a,t){e.exports=t(15)},15:function(e,a,t){"use strict";t.r(a);t(6);var l=t(0),n=t.n(l),r=t(8),c=t.n(r),i=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",{id:"about"},"React Form FP"),n.a.createElement("hr",null),n.a.createElement("blockquote",null,"Yet another form library for React, created as context provider, following functional programming principles."," "),n.a.createElement("hr",null),n.a.createElement("p",null,"React Form FP is a state management and validation library for easy form manipulation. Entire API is exposed though context provider, so it makes it easy to work with ",n.a.createElement("b",null,"class components")," or"," ",n.a.createElement("b",null,"functional components")),n.a.createElement("p",null,"Library has two major functionalities ",n.a.createElement("b",null,"FormContext")," for form state and validation and ",n.a.createElement("b",null,"WizardContext")," for multi-step forms."))},m=function(){return n.a.createElement("div",{className:"md-3 sidebar"},n.a.createElement("div",{className:"paper"},n.a.createElement("h4",null,n.a.createElement("a",{href:"#about"},"About")),n.a.createElement("h4",null,n.a.createElement("a",{href:"#installation"},"Installation")),n.a.createElement("h4",null,n.a.createElement("a",{href:"#usage"},"Usage"),n.a.createElement("h5",null,n.a.createElement("a",{href:"#form-state"},"Form State")),n.a.createElement("h5",null,n.a.createElement("a",{href:"#handle-change"},"Handling updates")),n.a.createElement("h5",null,n.a.createElement("a",{href:"#reading-errors"},"Showing Errors"))),n.a.createElement("h4",null,n.a.createElement("a",{href:"#examples"},"Examples")),n.a.createElement("h5",null,n.a.createElement("a",{href:"#examples-sfv"},"Simple Form Validation"))))},o=function(){return n.a.createElement("nav",{className:"border fixed split-nav"},n.a.createElement("div",{className:"nav-brand"},n.a.createElement("h3",null,n.a.createElement("a",{href:"/"},"React Form FP"))),n.a.createElement("div",{className:"collapsible"},n.a.createElement("input",{id:"collapsible1",type:"checkbox",name:"collapsible1"}),n.a.createElement("label",{htmlFor:"collapsible1"},n.a.createElement("div",{className:"bar1"}),n.a.createElement("div",{className:"bar2"}),n.a.createElement("div",{className:"bar3"})),n.a.createElement("div",{className:"collapsible-body"},n.a.createElement("ul",{className:"inline"},n.a.createElement("li",null,n.a.createElement("a",{href:"/"},"About")),n.a.createElement("li",null,n.a.createElement("a",{href:"/"},"Documentation")),n.a.createElement("li",null,n.a.createElement("a",{href:"https://github.com/rasha08/react-form-fp",target:"_blank",rel:"noopener noreferrer"},"Github"))))))},u=function(){return n.a.createElement("div",{className:"row flex-center beta-warn"},n.a.createElement("div",{className:"md-6"},n.a.createElement("input",{className:"alert-state",id:"alert-4",type:"checkbox"}),n.a.createElement("div",{className:"alert alert-warning dismissible"},"React Form FP library is still in beta version",n.a.createElement("label",{className:"btn-close",htmlFor:"alert-4"},"X"))))},s=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",{id:"installation"},"Installation"),n.a.createElement("p",null,"Install the package from ",n.a.createElement("b",null,"NPM")," by running:"),n.a.createElement("code",null,"npm install react-form-fp"),n.a.createElement("p",null," or"),n.a.createElement("code",null,"yarn add react-form-fp"))},E=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",{id:"usage"},"Usage"),n.a.createElement("p",null,"Form Context has on 2 major blocks"),n.a.createElement("ul",null,n.a.createElement("li",null,"State",n.a.createElement("ul",null,n.a.createElement("li",null,"Form State and Errors"),n.a.createElement("li",null,"Field value update handler"))),n.a.createElement("li",null,"Validation Schema",n.a.createElement("ul",null,n.a.createElement("li",null,"Schema"),n.a.createElement("li",null,"Validators",n.a.createElement("ul",null,n.a.createElement("li",null,"Single Field Validator"),n.a.createElement("li",null,"Entire Form Validator")))))),n.a.createElement("h4",{id:"form-state"},"Form State"),n.a.createElement("p",null,"Form State is created from the initial state provided to the"," ",n.a.createElement("b",null,n.a.createElement("i",null,"FormContextProvider"))," ","and extended with errors property."),n.a.createElement("code",null,"<FormContextProvider initialState={...} ...> ... </FormContextProvider>"),n.a.createElement("p",null,"State model is really simple but strict, initial state must have form name as top level key, and form fields as nested level properties, this is because of support for multiple forms on single view as well as multiple steps forms (Wizard)."),n.a.createElement("p",null,n.a.createElement("i",null,"So for example if we want to handle login form which have a username and password fields, our initial state model would look like this:")),n.a.createElement("code",null,"\n        const initialState = {\n          login: {\n            username: '',\n            password: ''\n          }\n        }\n        "),n.a.createElement("p",null,"And inside of your component you can consume that state by using"," ",n.a.createElement("b",null,n.a.createElement("i",null,"useFormContext()"))),n.a.createElement("code",null,"const { state: { login } } = useFormContext()"),n.a.createElement("p",null,"And this login object is of same structure as you initial state, so you can now have some input with value, for example,"," ",n.a.createElement("b",null,n.a.createElement("i",null,"username"))),n.a.createElement("code",null,"<input value={login.username} ... />"),n.a.createElement("h4",{id:"handle-change"},"Field value update handler"),n.a.createElement("p",null,"To update any field value inside the form you need to use"," ",n.a.createElement("b",null,n.a.createElement("i",null,"setFieldValue"))," ","handler from"," ",n.a.createElement("b",null,n.a.createElement("i",null,"useFormContext")),". It is a very simple method that is in charge of updating specific field within the form."),n.a.createElement("p",null,"Method is curried function and accepts 3 params"," ",n.a.createElement("b",null,n.a.createElement("i",null,"formName")),n.a.createElement("i",null,"(form key in FormContext state) "),n.a.createElement("b",null,n.a.createElement("i",null,"field")),n.a.createElement("i",null,"(key within the form) "),n.a.createElement("b",null,n.a.createElement("i",null,"value")),n.a.createElement("i",null,"(new value for the field)")),n.a.createElement("code",null,"const { setFieldValue } = useFormContext()"),n.a.createElement("br",null),n.a.createElement("code",null,"..."),n.a.createElement("br",null),n.a.createElement("code",null,"const handleFormChange = setFieldValue('login')"),n.a.createElement("br",null),n.a.createElement("code",null,"const handleFieldChange = (field) => ({ target: { value }}) => handleFormChange(field)(value);"),n.a.createElement("br",null),n.a.createElement("code",null,"..."),n.a.createElement("br",null),n.a.createElement("code",null,"<input value={login.username} onChange={handleFieldChange('username')} ... />"),n.a.createElement("h4",{id:"reading-errors"},"Errors"),n.a.createElement("p",null,"Errors are stored inside of the"," ",n.a.createElement("b",null,n.a.createElement("i",null,"FormContext state"))," ","by the"," ",n.a.createElement("b",null,n.a.createElement("i",null,"errors"))," ","key and every form field that has a defined validator have either"," ",n.a.createElement("b",null,n.a.createElement("i",null,"null"))," ","or"," ",n.a.createElement("b",null,n.a.createElement("i",null,"string"))," ","value"),n.a.createElement("p",null,"In our login example, error message logic for ",n.a.createElement("i",null,"username")," field should look something like this"),n.a.createElement("code",null,"..."),n.a.createElement("br",null),n.a.createElement("code",null,"{!!errors.username && <p className='text-danger'>{errors.username}</p>} "),n.a.createElement("br",null),n.a.createElement("code",null,"..."))},d=t(9),f=function(e){var a=e.title,t=e.id,r=e.example,c=e.doc,i=Object(l.useState)(!1),m=Object(d.a)(i,2),o=m[0],u=m[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",{id:t},a),n.a.createElement("div",{className:"example row"},n.a.createElement(r,null),n.a.createElement("div",{className:"example-doc"},o&&n.a.createElement(c,null)),n.a.createElement("button",{className:"example-toggle",onClick:function(){return u((function(e){return!e}))}},o?"Hide Code":"Show Code")))},p=t(20),h=t(19),b=t(18);t(5),t(17);function v(){return(v=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e}).apply(this,arguments)}var F,g,N=function(e,a){var t,l,n,r;switch(a.type){case"CLEAR_FIELD_ERROR":return v({},e,{errors:v({},e.errors,(t={},t[a.payload.field]=null,t))});case"SET_FIELD_ERROR":return v({},e,{errors:v({},e.errors,(l={},l[a.payload.field]=a.payload.error,l))});case"SET_FILED_VALUE":return v({},e,((r={})[a.payload.formName]=v({},e[a.payload.formName],((n={})[a.payload.field]=a.payload.value,n)),r));default:return e}},x=Object(l.createContext)({}),y=function(e){var a=e.initialState,t=e.validationSchema,r=e.children,c=Object(l.useReducer)(N,v({},a,{errors:{}})),i=c[0],m=c[1],o=function(e,a){return{setFieldValueAction:function(e,t,l){a({type:"SET_FILED_VALUE",payload:{formName:e,field:t,value:l}})},setFieldErrorAction:function(e,t){a({type:"SET_FIELD_ERROR",payload:{field:e,error:t}})},clearFieldError:function(t){e.errors[t]&&a({type:"CLEAR_FIELD_ERROR",payload:{field:t}})}}}(i,m),u=o.setFieldErrorAction,s=o.clearFieldError,E=o.setFieldValueAction,d=function(e,a,t){var l=Object(p.a)(2,(function(e,l){return l?a(e,l):t(e)}));return{validate:Object(p.a)(3,(function(a,t,n){if(Object(h.a)(a,e)&&Object(h.a)(t,e[a])){var r=e[a][t];Object(b.a)(l(t),r)(n)}})),validateAll:function(a,t){var n=[],r=function(e){return e&&n.push(!!n),e};return Object.entries(t).forEach((function(t){var n=t[0],c=t[1];Object(h.a)(a,e)&&Object(h.a)(n,e[a])&&Object(b.a)(l(n),r,e[a][n])(c)})),!n.length}}}(t,u,s),f=d.validate,F=d.validateAll;return n.a.createElement(x.Provider,{value:{setFieldValue:function(e){return function(a){return function(t){i.errors[a]&&f(e)(a)(t),E(e,a,t)}}},validate:f,state:i,validateForm:function(e,a){return F(e,a)}}},r)};Object(l.createContext)({});!function(e){e.Example="example"}(F||(F={})),function(e){e.FirstName="firstName",e.LastName="lastName"}(g||(g={}));var C={example:{firstName:function(e){return e.trim()?null:"First name is required"},lastName:function(){return null}}},S=function(){var e=Object(l.useContext)(x),a=e.setFieldValue,t=e.validate,r=e.validateForm,c=e.state,i=e.state,m=i.errors,o=i.example,u=Object(l.useCallback)((function(e){return function(t){var l=t.target.value;a(F.Example)(e)(l)}}),[a]),s=Object(l.useCallback)((function(e){return function(a){var l=a.target.value;t(F.Example)(e)(l||o[e])}}),[t,o]),E=Object(l.useCallback)((function(){r(F.Example,o)&&alert(JSON.stringify(o,null,2))}),[r,o]);return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"form-group col-6"},n.a.createElement("label",null,"First Name"),n.a.createElement("input",{value:o.firstName,onChange:u(g.FirstName),onBlur:s(g.FirstName)}),!!m.firstName&&n.a.createElement("p",{className:"text-danger"},m.firstName),n.a.createElement("label",null,"Last Name"),n.a.createElement("input",{value:o.lastName,onChange:u(g.FirstName),onBlur:s(g.FirstName)}),!!m.lastName&&n.a.createElement("p",{className:"text-danger"},m.lastName),n.a.createElement("button",{onClick:E},"Submit Form")),n.a.createElement("div",{className:"col-6"},n.a.createElement("b",null,"Form ContextState"),n.a.createElement("pre",null,n.a.createElement("code",null,JSON.stringify(c,null,2)))))},w=function(){return n.a.createElement(y,{initialState:{example:{firstName:"",lastName:""}},validationSchema:C},n.a.createElement(S,null))},O=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("h6",null,"ConditionalFormValidationExample"))},j=function(){return n.a.createElement(y,{initialState:{},validationSchema:{}},n.a.createElement(O,null))},k=function(){var e=Object(l.lazy)((function(){return t.e(4).then(t.bind(null,35))})),a=Object(l.lazy)((function(){return t.e(3).then(t.bind(null,36))}));return n.a.createElement(l.Suspense,{fallback:"..."},n.a.createElement("h2",{id:"examples"},"Examples"),n.a.createElement(f,{example:w,doc:e,title:"Simple Form validation",id:"examples-sfv"}),n.a.createElement(f,{example:j,doc:a,title:"Conditional Form validation",id:"examples-cfv"}))},R=function(){return n.a.createElement("div",{className:"container-fluid"},n.a.createElement(o,null),n.a.createElement(u,null),n.a.createElement("div",{className:"row flex-center"},n.a.createElement(m,null),n.a.createElement("div",{className:"md-8 offset-1"},n.a.createElement("div",{className:"paper"},n.a.createElement(i,null),n.a.createElement("div",{className:"section"},n.a.createElement(s,null)),n.a.createElement("div",{className:"section"},n.a.createElement(E,null)),n.a.createElement("div",{className:"section"},n.a.createElement(k,null))))))};c.a.render(n.a.createElement(R,null),document.getElementById("root"))},6:function(e,a,t){}},[[10,1,2]]]);
//# sourceMappingURL=main.0ecac124.chunk.js.map