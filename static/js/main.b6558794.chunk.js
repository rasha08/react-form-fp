(this["webpackJsonpreact-form-fp"]=this["webpackJsonpreact-form-fp"]||[]).push([[0],{14:function(e,a,t){"use strict";t.r(a);t(5);var l=t(0),n=t.n(l),r=t(7),i=t.n(r),m=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("h1",{id:"about"},"React Form FP"),n.a.createElement("hr",null),n.a.createElement("blockquote",null,"Yet another form library for React, created as context provider, following functional programming principles."," "),n.a.createElement("hr",null),n.a.createElement("p",null,"React Form FP is a state management and validation library for easy form manipulation. Entire API is exposed though context provider, so it makes it easy to work with ",n.a.createElement("b",null,"class components")," or"," ",n.a.createElement("b",null,"functional components")),n.a.createElement("p",null,"Library has two major functionalities ",n.a.createElement("b",null,"FormContext")," for form state and validation and ",n.a.createElement("b",null,"WizardContext")," for multi-step forms."))},c=function(){return n.a.createElement("div",{className:"md-3 sidebar"},n.a.createElement("div",{className:"paper"},n.a.createElement("h4",null,n.a.createElement("a",{href:"#about"},"About")),n.a.createElement("h4",null,n.a.createElement("a",{href:"#installation"},"Installation")),n.a.createElement("h4",null,n.a.createElement("a",{href:"#usage"},"Usage"),n.a.createElement("small",null,n.a.createElement("a",{href:"#form-state"},"Form State")),n.a.createElement("small",null,n.a.createElement("a",{href:"#handle-change"},"Handling updates")),n.a.createElement("small",null,n.a.createElement("a",{href:"#reading-errors"},"Showing Errors")),n.a.createElement("small",null,n.a.createElement("a",{href:"#validation-schema"},"Validation Schema")),n.a.createElement("small",null,n.a.createElement("a",{href:"#single-field-validator"},"Single Field Validator")),n.a.createElement("small",null,n.a.createElement("a",{href:"#validate-form"},"Validate Entire Form")),n.a.createElement("small",null,n.a.createElement("a",{href:"#set-field-validator"},"Set Field Validator"))),n.a.createElement("h4",null,n.a.createElement("a",{href:"#examples"},"Examples"),n.a.createElement("small",null,n.a.createElement("a",{href:"#examples-sfv"},"Simple Form Validation")),n.a.createElement("small",null,n.a.createElement("a",{href:"#examples-cfv"},"Conditional Form Validation")),n.a.createElement("small",null,n.a.createElement("a",{href:"#examples-dv"},"Adding and removing validators")))))},o=function(){return n.a.createElement("nav",{className:"border fixed split-nav"},n.a.createElement("div",{className:"nav-brand"},n.a.createElement("h3",null,n.a.createElement("a",{href:"/"},"React Form FP"))),n.a.createElement("div",{className:"collapsible"},n.a.createElement("input",{id:"collapsible1",type:"checkbox",name:"collapsible1"}),n.a.createElement("label",{htmlFor:"collapsible1"},n.a.createElement("div",{className:"bar1"}),n.a.createElement("div",{className:"bar2"}),n.a.createElement("div",{className:"bar3"})),n.a.createElement("div",{className:"collapsible-body"},n.a.createElement("ul",{className:"inline"},n.a.createElement("li",null,n.a.createElement("a",{href:"/"},"About")),n.a.createElement("li",null,n.a.createElement("a",{href:"/"},"Documentation")),n.a.createElement("li",null,n.a.createElement("a",{href:"https://github.com/rasha08/react-form-fp",target:"_blank",rel:"noopener noreferrer"},"Github"))))))},u=function(){return n.a.createElement("div",{className:"row flex-center beta-warn"},n.a.createElement("div",{className:"md-6"},n.a.createElement("input",{className:"alert-state",id:"alert-4",type:"checkbox"}),n.a.createElement("div",{className:"alert alert-warning dismissible"},"React Form FP library is still in beta version",n.a.createElement("label",{className:"btn-close",htmlFor:"alert-4"},"X"))))},s=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",{id:"installation"},"Installation"),n.a.createElement("p",null,"Install the package from ",n.a.createElement("b",null,"NPM")," by running:"),n.a.createElement("code",null,"npm install react-form-fp"),n.a.createElement("p",null," or"),n.a.createElement("code",null,"yarn add react-form-fp"))},d=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",{id:"usage"},"Usage"),n.a.createElement("p",null,"Form Context has on 2 major blocks"),n.a.createElement("ul",null,n.a.createElement("li",null,"State",n.a.createElement("ul",null,n.a.createElement("li",null,"Form State and Errors"),n.a.createElement("li",null,"Field value update handler"))),n.a.createElement("li",null,"Validation Schema",n.a.createElement("ul",null,n.a.createElement("li",null,"Schema"),n.a.createElement("li",null,"Validators",n.a.createElement("ul",null,n.a.createElement("li",null,"Single Field Validator"),n.a.createElement("li",null,"Entire Form Validator"),n.a.createElement("li",null,"Registering New Validators Dynamically")))))),n.a.createElement("h4",{id:"form-state"},"Form State"),n.a.createElement("p",null,"Form State is created from the initial state provided to the"," ",n.a.createElement("b",null,n.a.createElement("i",null,"FormContextProvider"))," ","and extended with errors property."),n.a.createElement("code",null,"<FormContextProvider initialState={...} ...> ... </FormContextProvider>"),n.a.createElement("p",null,"State model is really simple but strict, initial state must have form name as top level key, and form fields as nested level properties, this is because of support for multiple forms on single view as well as multiple steps forms (Wizard)."),n.a.createElement("p",null,n.a.createElement("i",null,"So for example if we want to handle login form which have a username and password fields, our initial state model would look like this:")),n.a.createElement("code",null,"\n        const initialState = {\n          login: {\n            username: '',\n            password: ''\n          }\n        }\n        "),n.a.createElement("p",null,"And inside of your component you can consume that state by using"," ",n.a.createElement("b",null,n.a.createElement("i",null,"useFormContext()"))),n.a.createElement("code",null,"const { state: { login } } = useFormContext()"),n.a.createElement("p",null,"And this login object is of same structure as you initial state, so you can now have some input with value, for example,"," ",n.a.createElement("b",null,n.a.createElement("i",null,"username"))),n.a.createElement("code",null,"<input value={login.username} ... />"),n.a.createElement("h4",{id:"handle-change"},"Field value update handler"),n.a.createElement("p",null,"To update any field value inside the form you need to use"," ",n.a.createElement("b",null,n.a.createElement("i",null,"setFieldValue"))," ","handler from"," ",n.a.createElement("b",null,n.a.createElement("i",null,"useFormContext")),". It is a very simple method that is in charge of updating specific field within the form."),n.a.createElement("p",null,"Method is curried function and accepts 3 params"," ",n.a.createElement("b",null,n.a.createElement("i",null,"formName")),n.a.createElement("i",null,"(form key in FormContext state) "),n.a.createElement("b",null,n.a.createElement("i",null,"field")),n.a.createElement("i",null,"(key within the form) "),n.a.createElement("b",null,n.a.createElement("i",null,"value")),n.a.createElement("i",null,"(new value for the field)")),n.a.createElement("code",null,"const { setFieldValue } = useFormContext()"),n.a.createElement("br",null),n.a.createElement("code",null,"..."),n.a.createElement("br",null),n.a.createElement("code",null,"const handleFormChange = setFieldValue('login')"),n.a.createElement("br",null),n.a.createElement("code",null,"const handleFieldChange = (field) => ({ target: { value }}) => handleFormChange(field)(value);"),n.a.createElement("br",null),n.a.createElement("code",null,"..."),n.a.createElement("br",null),n.a.createElement("code",null,"<input value={login.username} onChange={handleFieldChange('username')} ... />"),n.a.createElement("h4",{id:"reading-errors"},"Errors"),n.a.createElement("p",null,"Errors are stored inside of the"," ",n.a.createElement("b",null,n.a.createElement("i",null,"FormContext state"))," ","by the"," ",n.a.createElement("b",null,n.a.createElement("i",null,"errors"))," ","key and every form field that has a defined validator have either"," ",n.a.createElement("b",null,n.a.createElement("i",null,"null"))," ","or"," ",n.a.createElement("b",null,n.a.createElement("i",null,"string"))," ","value"),n.a.createElement("p",null,"In our login example, error message logic for ",n.a.createElement("i",null,"username")," field should look something like this"),n.a.createElement("code",null,"..."),n.a.createElement("br",null),n.a.createElement("code",null,"{!!errors.username && <p className='text-danger'>{errors.username}</p>} "),n.a.createElement("br",null),n.a.createElement("code",null,"..."),n.a.createElement("h4",{id:"validation-schema"},"Validation Schema"),n.a.createElement("p",null,"Validation schema is used to define form validation and it follows the same structure as initial form state"),n.a.createElement("code",null,"{ [formName]: { formField: validatorFunc } }"),n.a.createElement("p",null,"Validator function is a simple function that accepts a value and returns either"," ",n.a.createElement("b",null,n.a.createElement("i",null,"string | null"))),n.a.createElement("p",null," ",n.a.createElement("b",null,n.a.createElement("i",null,"ValidationSchema"))," ","is generic type accepts two additional types"," ",n.a.createElement("b",null,n.a.createElement("i",null,"FormName"))," ",n.a.createElement("b",null,n.a.createElement("i",null,"FormType")),n.a.createElement("code",null,"\n          export type Validator<VT = unknown, ST = unknown> = (\n            value: VT,\n            state?: ST\n          ) => string | null\n\n          export type ValidationSchema<\n            FormName extends number | string = string,\n            FormField extends number | string = string\n          > = {\n            [key in FormName]: {\n              [key in FormField]: Validator\n            }\n          }\n          ")),n.a.createElement("p",null,"So for our login form we can define a validation schema:"),n.a.createElement("code",null,"   {\n        login: {\n         firstName: (val: string) => !!val.trim() ? null : 'First name is required',\n         lastName: () => null // Empty validator\n       }\n    }"),n.a.createElement("p",null,"The idea behind it is really simple, every field that has a defined validator will be validated against it, and if validator returns a"," ",n.a.createElement("b",null,n.a.createElement("i",null,"null"))," ","field is valid."),n.a.createElement("h4",{id:"single-field-validator"},"Single Field Validator"),n.a.createElement("p",null,"Field validator is a function which takes field value as an argument and returns either string or null. Additionally every validator gets a"," ",n.a.createElement("b",null,n.a.createElement("i",null,"FormContext state"))," ","as second a parameter, which can be useful when writing a conditional validations"," ",n.a.createElement("i",null,n.a.createElement("small",null,"(if the field validation logic depends on a another field value within the state. ex: Passport number validation is bound to selected country)"))),n.a.createElement("p",null,"Validator function type is:"),n.a.createElement("code",null,"type Validator<VT, ST> = (value: VT, state?: ST) => string | null"),n.a.createElement("h4",{id:"validate-form"},"Validate Entire Form"),n.a.createElement("p",null,"Validate entire form will run all defined validator and return"," ",n.a.createElement("b",null,"true")," or ",n.a.createElement("b",null,"false"),", also while running the validators will set form errors if any of the validator fails"),n.a.createElement("p",null,"Validate form function type is"),n.a.createElement("code",null,"ValidateForm<FormName extends string | number, T> = (formName: FormName, values: T) => boolean"),n.a.createElement("h4",{id:"set-field-validator"},"Set Field Validator"),n.a.createElement("p",null,"Set filed validator is used for adding, removing or updating validators from initial validation schema."),n.a.createElement("p",null,"Type of setValidator function is: "),n.a.createElement("code",null,"SetValidator<FormName extends string | number, T, ValueType = unknown> = (\n  formName: FormName,\n  field: keyof T,\n  validator: Validator<ValueType>\n) => void"))},E=t(8),f=function(e){var a=e.title,t=e.id,r=e.example,i=e.doc,m=Object(l.useState)(!1),c=Object(E.a)(m,2),o=c[0],u=c[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",{id:t},a),n.a.createElement("div",{className:"example row"},n.a.createElement(r,null),n.a.createElement("div",{className:"example-doc"},o&&n.a.createElement(i,null)),n.a.createElement("button",{className:"example-toggle",onClick:function(){return u((function(e){return!e}))}},o?"Hide Code":"Show Code")))},p=t(17),h=t(18);t(4),t(16);function v(){return(v=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e}).apply(this,arguments)}var b,N,g=function(e,a){var t,l,n,r;switch(a.type){case"CLEAR_FIELD_ERROR":return v({},e,{errors:v({},e.errors,(t={},t[a.payload.field]=null,t))});case"SET_FIELD_ERROR":return v({},e,{errors:v({},e.errors,(l={},l[a.payload.field]=a.payload.error,l))});case"SET_FILED_VALUE":return v({},e,((r={})[a.payload.formName]=v({},e[a.payload.formName],((n={})[a.payload.field]=a.payload.value,n)),r));default:return e}},F=function(e,a,t){var l=Object(p.a)(2,(function(e,l){return l?a(e,l):t(e)}));return{validate:Object(p.a)(4,(function(a,t,n,r){if(Object(h.a)(a,e)&&Object(h.a)(t,e[a])){var i=e[a][t];l(t)(i(n,r))}})),validateAll:function(a,t,n){var r=[];return Object.entries(t).forEach((function(t){var i,m=t[0],c=t[1];Object(h.a)(a,e)&&(Object(h.a)(m,e[a])&&l(m)(((i=e[a][m](c,n))&&r.push(!!r),i)))})),!r.length}}},x=Object(l.createContext)({}),y=function(){return Object(l.useContext)(x)},C=function(e){var a=e.initialState,t=e.validationSchema,r=e.children,i=Object(l.useReducer)(g,v({},a,{errors:{}})),m=i[0],c=i[1],o=Object(l.useState)(t),u=o[0],s=o[1],d=function(e,a){return{setFieldValueAction:function(e,t,l){a({type:"SET_FILED_VALUE",payload:{formName:e,field:t,value:l}})},setFieldErrorAction:function(e,t){a({type:"SET_FIELD_ERROR",payload:{field:e,error:t}})},clearFieldError:function(t){e.errors[t]&&a({type:"CLEAR_FIELD_ERROR",payload:{field:t}})}}}(m,c),E=d.setFieldErrorAction,f=d.clearFieldError,p=d.setFieldValueAction,h=F(u,E,f),b=h.validate,N=h.validateAll,y=function(e){return function(a){return function(t){return b(e,a,t,m)}}};return n.a.createElement(x.Provider,{value:{setFieldValue:function(e){return function(a){return function(t){m.errors[a]&&y(e)(a)(t),p(e,a,t)}}},validate:y,state:m,validateForm:function(e,a){return N(e,a,m)},setValidator:function(e,a,t){s((function(l){var n,r;return v({},l,((r={})[e]=v({},l[e],((n={})[a]=t,n)),r))}))}}},r)};Object(l.createContext)({});!function(e){e.Example="example"}(b||(b={})),function(e){e.FirstName="firstName",e.LastName="lastName"}(N||(N={}));var w,S,O={example:{firstName:function(e){return e.trim()?null:"First name is required"},lastName:function(){return null}}},V=function(){var e=y(),a=e.setFieldValue,t=e.validate,r=e.validateForm,i=e.state,m=e.state,c=m.errors,o=m.example,u=Object(l.useCallback)((function(e){return function(t){var l=t.target.value;a(b.Example)(e)(l)}}),[a]),s=Object(l.useCallback)((function(e){return function(a){var l=a.target.value;t(b.Example)(e)(l||o[e])}}),[t,o]),d=Object(l.useCallback)((function(){r(b.Example,o)&&alert(JSON.stringify(o,null,2))}),[r,o]);return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"form-group col-6"},n.a.createElement("label",null,"First Name"),n.a.createElement("input",{value:o.firstName,onChange:u(N.FirstName),onBlur:s(N.FirstName)}),!!c.firstName&&n.a.createElement("p",{className:"text-danger"},c.firstName),n.a.createElement("label",null,"Last Name"),n.a.createElement("input",{value:o.lastName,onChange:u(N.LastName),onBlur:s(N.LastName)}),!!c.lastName&&n.a.createElement("p",{className:"text-danger"},c.lastName),n.a.createElement("button",{onClick:d},"Submit Form")),n.a.createElement("div",{className:"col-6"},n.a.createElement("b",null,"Form ContextState"),n.a.createElement("pre",null,n.a.createElement("code",null,JSON.stringify(i,null,2)))))},k=function(){return n.a.createElement(C,{initialState:{example:{firstName:"",lastName:""}},validationSchema:O},n.a.createElement(V,null))};!function(e){e.Example="example"}(w||(w={})),function(e){e.FirstName="firstName",e.LastName="lastName",e.NumberOfChildren="numberOfChildren",e.HasKids="hasKids"}(S||(S={}));var j,L,T={example:{firstName:function(e){return e.trim()?null:"First name is required"},lastName:function(){return null},hasKids:function(){return null},numberOfChildren:function(e,a){return(null===a||void 0===a?void 0:a.example.hasKids)?e>0?null:"Please specify how many children do you have.":null}}},R=function(){var e=y(),a=e.setFieldValue,t=e.validate,r=e.validateForm,i=e.state,m=e.state,c=m.errors,o=m.example,u=Object(l.useCallback)((function(e){return function(t){var l=t.target.value;a(w.Example)(e)(l)}}),[a]),s=Object(l.useCallback)((function(){a(w.Example)(S.HasKids)(!o.hasKids)}),[a,o]),d=Object(l.useCallback)((function(e){return function(a){var l=a.target.value;t(w.Example)(e)(l||o[e])}}),[t,o]),E=Object(l.useCallback)((function(){r(w.Example,o)&&alert(JSON.stringify(o,null,2))}),[r,o]);return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"form-group col-6"},n.a.createElement("label",null,"First Name"),n.a.createElement("input",{value:o.firstName,onChange:u(S.FirstName),onBlur:d(S.FirstName)}),!!c.firstName&&n.a.createElement("p",{className:"text-danger"},c.firstName),n.a.createElement("label",null,"Last Name"),n.a.createElement("input",{value:o.lastName,onChange:u(S.LastName),onBlur:d(S.LastName)}),!!c.lastName&&n.a.createElement("p",{className:"text-danger"},c.lastName),n.a.createElement("label",{className:"row paper-check"},n.a.createElement("input",{id:"paperSwitch4",name:"paperSwitch4",type:"checkbox",checked:o.hasKids,onChange:s}),n.a.createElement("span",{className:"paper-switch-slider"},"Do you have kids?")),n.a.createElement("br",null),o.hasKids&&n.a.createElement(n.a.Fragment,null,n.a.createElement("label",null,"Number Of children"),n.a.createElement("input",{type:"number",value:o.numberOfChildren,onChange:u(S.NumberOfChildren),onBlur:d(S.NumberOfChildren)}),!!c.numberOfChildren&&n.a.createElement("p",{className:"text-danger"},c.numberOfChildren)),n.a.createElement("button",{onClick:E},"Submit Form")),n.a.createElement("div",{className:"col-6"},n.a.createElement("b",null,"Form ContextState"),n.a.createElement("pre",null,n.a.createElement("code",null,JSON.stringify(i,null,2)))))},A=function(){return n.a.createElement(C,{initialState:{example:{firstName:"",lastName:"",hasKids:!1,numberOfChildren:void 0}},validationSchema:T},n.a.createElement(R,null))};!function(e){e.Example="example"}(j||(j={})),function(e){e.FirstName="firstName",e.LastName="lastName",e.NumberOfChildren="numberOfChildren",e.Married="married",e.WifeName="wifeName"}(L||(L={}));var P={example:{firstName:function(e){return e.trim()?null:"First name is required"},lastName:function(){return null},married:function(){return null},numberOfChildren:function(e,a){return(null===a||void 0===a?void 0:a.example.married)?e>0?null:"Please specify how many children do you have.":null},wifeName:function(){return null}}},I=function(){var e=y(),a=e.setFieldValue,t=e.validate,r=e.validateForm,i=e.state,m=e.state,c=m.errors,o=m.example,u=e.setValidator,s=Object(l.useMemo)((function(){return o.married}),[o]),d=Object(l.useCallback)((function(e){return function(t){var l=t.target.value;a(j.Example)(e)(l)}}),[a]),E=Object(l.useCallback)((function(){a(j.Example)(L.Married)(!o.married)}),[a,o]),f=Object(l.useCallback)((function(e){return function(a){var l=a.target.value;t(j.Example)(e)(l||o[e])}}),[t,o]),p=Object(l.useCallback)((function(){r(j.Example,o)&&alert(JSON.stringify(o,null,2))}),[r,o]);return Object(l.useEffect)((function(){u(j.Example,L.WifeName,s?function(e){return(null===e||void 0===e?void 0:e.length)>2?null:"Name must be at least 3 chars long."}:function(){return null})}),[s]),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"form-group col-6"},n.a.createElement("label",null,"First Name"),n.a.createElement("input",{value:o.firstName,onChange:d(L.FirstName),onBlur:f(L.FirstName)}),!!c.firstName&&n.a.createElement("p",{className:"text-danger"},c.firstName),n.a.createElement("label",null,"Last Name"),n.a.createElement("input",{value:o.lastName,onChange:d(L.LastName),onBlur:f(L.LastName)}),!!c.lastName&&n.a.createElement("p",{className:"text-danger"},c.lastName),n.a.createElement("label",{className:"row paper-check"},n.a.createElement("input",{id:"switch8",type:"checkbox",checked:o.married,onChange:E}),n.a.createElement("span",{className:"paper-switch-slider"},"Are you married?")),n.a.createElement("br",null),o.married&&n.a.createElement(n.a.Fragment,null,n.a.createElement("label",null,"Wife's Name"),n.a.createElement("input",{value:o.wifeName,onChange:d(L.WifeName),onBlur:f(L.WifeName)}),!!c.wifeName&&n.a.createElement("p",{className:"text-danger"},c.wifeName)),n.a.createElement("button",{onClick:p},"Submit Form")),n.a.createElement("div",{className:"col-6"},n.a.createElement("b",null,"Form ContextState"),n.a.createElement("pre",null,n.a.createElement("code",null,JSON.stringify(i,null,2)))))},_=function(){return n.a.createElement(C,{initialState:{example:{firstName:"",lastName:"",married:!1,numberOfChildren:void 0,wifeName:void 0}},validationSchema:P},n.a.createElement(I,null))},B=function(){var e=Object(l.lazy)((function(){return t.e(4).then(t.bind(null,33))})),a=Object(l.lazy)((function(){return t.e(2).then(t.bind(null,34))})),r=Object(l.lazy)((function(){return t.e(3).then(t.bind(null,35))}));return n.a.createElement(l.Suspense,{fallback:"..."},n.a.createElement("h2",{id:"examples"},"Examples"),n.a.createElement(f,{example:k,doc:e,title:"Simple Form validation",id:"examples-sfv"}),n.a.createElement(f,{example:A,doc:a,title:"Conditional Form validation",id:"examples-cfv"}),n.a.createElement(f,{example:_,doc:r,title:"Adding and removing Validators",id:"examples-dv"}))},D=function(){return n.a.createElement("div",{className:"container-fluid"},n.a.createElement(o,null),n.a.createElement(u,null),n.a.createElement("div",{className:"row flex-center"},n.a.createElement(c,null),n.a.createElement("div",{className:"md-8 offset-1"},n.a.createElement("div",{className:"paper"},n.a.createElement(m,null),n.a.createElement("div",{className:"section"},n.a.createElement(s,null)),n.a.createElement("div",{className:"section"},n.a.createElement(d,null)),n.a.createElement("div",{className:"section"},n.a.createElement(B,null))))))};i.a.render(n.a.createElement(D,null),document.getElementById("root"))},5:function(e,a,t){},9:function(e,a,t){e.exports=t(14)}},[[9,1,5]]]);
//# sourceMappingURL=main.b6558794.chunk.js.map